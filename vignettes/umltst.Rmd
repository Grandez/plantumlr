---
title: "Documenting R Classes"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{Documenting R Classes}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>"
)
```

```{r setup, echo=FALSE}
 #library(umlr2)
 source("../R/R6UMLRCtes.R")
 source("../R/R6CLASS.R")
 source("../R/R6PlantUML.R")
 source("../R/R6UMLR.R")
 # file.sources = list.files("../R", pattern="*.R", full.names=T) 
 # sapply(file.sources, source, .GlobalEnv)
 plant = UMLR$new(plantuml="C:\\SDK\\plantuml\\plantuml.jar")
```

# Intro

El paquete provee una clase para generar definiciones UML de objetos R.
Actualmente es posible procesar:

- Clases R6
- Clases S4 

El proceso general consiste en crear un objeto **UMLR** y ejecutar el metodo `plotClass`:

{: style="text-align: center" }
```{r, eval=FALSE, echo=TRUE}
obj = Objeto$new()  # Object to plot
uml =  UMLR$new()   # Get an instance of UMLR
uml$plotClass(obj, detail=level_of_detail, deep=deep_level)
```


# Detail

Este parametro define el detalle que se quiere generar de la clase.


# Ejemplos

Supongamos la siguiente clase

```{r}
CLASS0 = R6::R6Class("R6CLASS0",
   public = list(
       initialize = function(...) { }
       ,method0   = function()    { }
   )
   ,active  = list (
       var0 = function(value) { }
   )
   ,private = list (
        .var0 = NA
       ,.method0 = function(data) {}
   )
)
```

```{r, echo=FALSE}
c0 = CLASS0$new()
```

| basic  | simple | formal |
|:-:|:-:|:-:|
| `r plant$plotClass(c0, plant$detail$basic)` | `r plant$plotClass(c0, plant$detail$simple)` | `r plant$plotClass(c0, plant$detail$formal)` 



```{r}
CLASS1 = R6::R6Class("R6CLASS1", inherit=CLASS0,
   public = list(
        attr1 = NULL
       ,attr2 = NULL
       ,initialize = function() {}
       ,finalize   = function() {}
       ,method1    = function() {}
   )
   ,private = list(
        private1 = 1
       ,.method1 = function(dato) {}
   )
)
```

Por defecto no se mostraran la parte privada

```{r, fig.cap=c('deep=FALSE','deep=TRUE'), fig.show='hold',fig.align='top' }
  c0 = CLASS0$new()
  
  #knitr::include_graphics(c(plant$plotClass(c1, deep=FALSE),plant$plotClass(c1, deep=TRUE)))
  
  #plant$plotClass(c1)
```

```{r, fig.cap="detail=simple"}
plant$plotClass(c0)
```

tabla

| pic1  | pic2  |
|---|---|
| `r plant$plotClass(c0)`|  `r plant$plotClass(c0)` | 

